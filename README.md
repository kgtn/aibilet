# AIBilet - Умный поиск авиабилетов

AIBilet - это Telegram бот для умного поиска авиабилетов с использованием искусственного интеллекта. Бот понимает естественный язык и помогает найти лучшие варианты перелетов с учетом различных параметров, таких как гибкие даты, длительность поездки и предпочтения по цене.

## Основные возможности

- **Понимание естественного языка**: Бот понимает запросы на русском языке в свободной форме
- **Гибкие даты**: Поддержка поиска с гибкими датами ("в начале месяца", "через 2-3 недели")
- **Умный поиск**: Учитывает множество параметров для подбора оптимальных вариантов
- **Оптимизация по цене**: Находит лучшие предложения с учетом стоимости и удобства
- **Мультизапросы**: Возможность искать билеты с разной длительностью поездки

## Технологии

- Python 3.8+
- aiogram (Telegram Bot API)
- OpenAI API (GPT-4)
- Aviasales/Travelpayouts API
- aiohttp для асинхронных запросов

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/kgtn/aibilet.git
cd aibilet
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/macOS
# или
.\venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` на основе `.env.example` и заполните необходимые переменные окружения:
```bash
cp .env.example .env
```

## Конфигурация

Для работы бота необходимы следующие API ключи:

- `TELEGRAM_BOT_TOKEN`: Токен вашего Telegram бота (получить у [@BotFather](https://t.me/BotFather))
- `OPENAI_API_KEY`: Ключ API OpenAI для обработки естественного языка
- `AVIASALES_API_KEY`: Ключ API Aviasales/Travelpayouts для поиска билетов

## Запуск

```bash
python src/main.py
```

## Примеры запросов

Бот понимает различные форматы запросов, например:

- "Найди билеты из Москвы в Париж на следующей неделе"
- "Хочу полететь в Бангкок из Питера в начале февраля на 15-20 дней"
- "Билеты в Рим из Москвы на выходные"

## Особенности работы

- Бот автоматически определяет оптимальные даты для поиска
- Учитывает сезонность и праздники при подборе билетов
- Ранжирует билеты по соотношению цена/качество
- Предоставляет прямые ссылки на покупку билетов

## Разработка

Проект имеет модульную структуру:

- `src/services/openai_service.py`: Обработка естественного языка
- `src/services/aviasales_service.py`: Взаимодействие с API Aviasales
- `src/services/dialog_state.py`: Управление состоянием диалога
- `src/handlers/`: Обработчики сообщений Telegram

## Лицензия

MIT License. См. файл [LICENSE](LICENSE) для подробностей.

## Авторы

- [@kgtn](https://github.com/kgtn) - Основной разработчик

## Содействие

Если вы хотите внести свой вклад в проект:

1. Форкните репозиторий
2. Создайте ветку для ваших изменений
3. Внесите изменения и создайте pull request

## Поддержка

Если у вас возникли вопросы или проблемы, создайте issue в репозитории.
